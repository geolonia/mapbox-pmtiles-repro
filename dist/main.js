(()=>{"use strict";var t=(t,e,n)=>new Promise(((r,i)=>{var o=t=>{try{a(n.next(t))}catch(t){i(t)}},s=t=>{try{a(n.throw(t))}catch(t){i(t)}},a=t=>t.done?r(t.value):Promise.resolve(t.value).then(o,s);a((n=n.apply(t,e)).next())})),e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),o=0;o<31;++o)i[o]=e+=1<<t[o-1];var s=new r(i[30]);for(o=1;o<30;++o)for(var a=i[o];a<i[o+1];++a)s[a]=a-i[o]<<5|o;return[i,s]},c=a(i,2),l=c[0],u=c[1];l[28]=258,u[258]=28;var f,h=a(o,0),g=h[0],d=(h[1],new n(32768));for(m=0;m<32768;++m)f=(61680&(f=(52428&(f=(43690&m)>>>1|(21845&m)<<1))>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[m]=((65280&f)>>>8|(255&f)<<8)>>>1;var y=function(t,e,r){for(var i=t.length,o=0,s=new n(e);o<i;++o)t[o]&&++s[t[o]-1];var a,c=new n(e);for(o=0;o<e;++o)c[o]=c[o-1]+s[o-1]<<1;if(r){a=new n(1<<e);var l=15-e;for(o=0;o<i;++o)if(t[o])for(var u=o<<4|t[o],f=e-t[o],h=c[t[o]-1]++<<f,g=h|(1<<f)-1;h<=g;++h)a[d[h]>>>l]=u}else for(a=new n(i),o=0;o<i;++o)t[o]&&(a[o]=d[c[t[o]-1]++]>>>15-t[o]);return a},p=new e(288);for(m=0;m<144;++m)p[m]=8;for(m=144;m<256;++m)p[m]=9;for(m=256;m<280;++m)p[m]=7;for(m=280;m<288;++m)p[m]=8;var m,w=new e(32);for(m=0;m<32;++m)w[m]=5;var v=y(p,9,1),x=y(w,5,1),b=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},U=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},D=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},E=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function(t,e,n){var r=new Error(e||E[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,L),!n)throw r;return r},T=function(t,a,c){var u=t.length;if(!u||c&&c.f&&!c.l)return a||new e(0);var f=!a||c,h=!c||c.i;c||(c={}),a||(a=new e(3*u));var d=function(t){var n=a.length;if(t>n){var r=new e(Math.max(2*n,t));r.set(a),a=r}},p=c.f||0,m=c.p||0,w=c.b||0,E=c.l,T=c.d,M=c.m,z=c.n,A=8*u;do{if(!E){p=U(t,m,1);var C=U(t,m+1,3);if(m+=3,!C){var O=t[($=4+((m+7)/8|0))-4]|t[$-3]<<8,Z=$+O;if(Z>u){h&&L(0);break}f&&d(w+O),a.set(t.subarray($,Z),w),c.b=w+=O,c.p=m=8*Z,c.f=p;continue}if(1==C)E=v,T=x,M=9,z=5;else if(2==C){var B=U(t,m,31)+257,V=U(t,m+10,15)+4,P=B+U(t,m+5,31)+1;m+=14;for(var k=new e(P),I=new e(19),_=0;_<V;++_)I[s[_]]=U(t,m+3*_,7);m+=3*V;var R=b(I),H=(1<<R)-1,S=y(I,R,1);for(_=0;_<P;){var $,j=S[U(t,m,H)];if(m+=15&j,($=j>>>4)<16)k[_++]=$;else{var K=0,J=0;for(16==$?(J=3+U(t,m,3),m+=2,K=k[_-1]):17==$?(J=3+U(t,m,7),m+=3):18==$&&(J=11+U(t,m,127),m+=7);J--;)k[_++]=K}}var N=k.subarray(0,B),Y=k.subarray(B);M=b(N),z=b(Y),E=y(N,M,1),T=y(Y,z,1)}else L(1);if(m>A){h&&L(0);break}}f&&d(w+131072);for(var F=(1<<M)-1,W=(1<<z)-1,X=m;;X=m){var q=(K=E[D(t,m)&F])>>>4;if((m+=15&K)>A){h&&L(0);break}if(K||L(2),q<256)a[w++]=q;else{if(256==q){X=m,E=null;break}var G=q-254;if(q>264){var Q=i[_=q-257];G=U(t,m,(1<<Q)-1)+l[_],m+=Q}var tt=T[D(t,m)&W],et=tt>>>4;if(tt||L(3),m+=15&tt,Y=g[et],et>3&&(Q=o[et],Y+=D(t,m)&(1<<Q)-1,m+=Q),m>A){h&&L(0);break}f&&d(w+131072);for(var nt=w+G;w<nt;w+=4)a[w]=a[w-Y],a[w+1]=a[w+1-Y],a[w+2]=a[w+2-Y],a[w+3]=a[w+3-Y];w=nt}}c.l=E,c.p=X,c.b=w,c.f=p,E&&(p=1,c.m=M,c.d=T,c.n=z)}while(!p);return w==a.length?a:function(t,i,o){(null==i||i<0)&&(i=0),(null==o||o>t.length)&&(o=t.length);var s=new(2==t.BYTES_PER_ELEMENT?n:4==t.BYTES_PER_ELEMENT?r:e)(o-i);return s.set(t.subarray(i,o)),s}(a,0,w)},M=new e(0),z=function(t){31==t[0]&&139==t[1]&&8==t[2]||L(6,"invalid gzip data");var e=t[3],n=10;4&e&&(n+=t[10]|2+(t[11]<<8));for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(2&e)},A=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},C=function(t){(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&L(6,"invalid zlib data"),32&t[1]&&L(6,"invalid zlib data: preset dictionaries not supported")};function O(t,n){return 31==t[0]&&139==t[1]&&8==t[2]?function(t,n){return T(t.subarray(z(t),-8),n||new e(A(t)))}(t,n):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?function(t,e){return T(t,e)}(t,n):function(t,e){return T((C(t),t.subarray(2,-4)),e)}(t,n)}var Z="undefined"!=typeof TextDecoder&&new TextDecoder;try{Z.decode(M,{stream:!0})}catch(t){}var B=(t,e)=>t*Math.pow(2,e),V=(t,e)=>Math.floor(t/Math.pow(2,e)),P=(t,e)=>B(t.getUint16(e+1,!0),8)+t.getUint8(e),k=(t,e)=>B(t.getUint32(e+2,!0),16)+t.getUint16(e,!0),I=(t,e,n,r,i)=>{if(t!=r.getUint8(i))return t-r.getUint8(i);const o=P(r,i+1);if(e!=o)return e-o;const s=P(r,i+4);return n!=s?n-s:0},_=(t,e,n,r)=>{const i=R(t,e,n,r);return i?{z:e,x:n,y:r,offset:i[0],length:i[1],is_dir:!1}:null},R=(t,e,n,r)=>{let i=0,o=t.byteLength/17-1;for(;i<=o;){const s=o+i>>1,a=I(e,n,r,t,17*s);if(a>0)i=s+1;else{if(!(a<0))return[k(t,17*s+7),t.getUint32(17*s+13,!0)];o=s-1}}return null},H=(t,e)=>t.is_dir&&!e.is_dir?1:!t.is_dir&&e.is_dir?-1:t.z!==e.z?t.z-e.z:t.x!==e.x?t.x-e.x:t.y-e.y,S=(t,e)=>{const n=t.getUint8(17*e);return{z:127&n,x:P(t,17*e+1),y:P(t,17*e+4),offset:k(t,17*e+7),length:t.getUint32(17*e+13,!0),is_dir:n>>7==1}},$=t=>{const e=[],n=new DataView(t);for(let t=0;t<n.byteLength/17;t++)e.push(S(n,t));return j(e)},j=t=>{t.sort(H);const e=new ArrayBuffer(17*t.length),n=new Uint8Array(e);for(let e=0;e<t.length;e++){const r=t[e];let i=r.z;r.is_dir&&(i|=128),n[17*e]=i,n[17*e+1]=255&r.x,n[17*e+2]=r.x>>8&255,n[17*e+3]=r.x>>16&255,n[17*e+4]=255&r.y,n[17*e+5]=r.y>>8&255,n[17*e+6]=r.y>>16&255,n[17*e+7]=255&r.offset,n[17*e+8]=255&V(r.offset,8),n[17*e+9]=255&V(r.offset,16),n[17*e+10]=255&V(r.offset,24),n[17*e+11]=255&V(r.offset,32),n[17*e+12]=255&V(r.offset,48),n[17*e+13]=255&r.length,n[17*e+14]=r.length>>8&255,n[17*e+15]=r.length>>16&255,n[17*e+16]=r.length>>24&255}return e},K={getHeader:function(e){return t(this,null,(function*(){const t=yield e.getBytes(0,512e3),n=new DataView(t.data),r=n.getUint32(4,!0),i=n.getUint16(8,!0),o=new TextDecoder("utf-8"),s=JSON.parse(o.decode(new DataView(t.data,10,r)));let a=0;"gzip"===s.compression&&(a=2);let c=0;"minzoom"in s&&(c=+s.minzoom);let l=0;"maxzoom"in s&&(l=+s.maxzoom);let u=0,f=0,h=0,g=-180,d=-85,y=180,p=85;if(s.bounds){const t=s.bounds.split(",");g=+t[0],d=+t[1],y=+t[2],p=+t[3]}if(s.center){const t=s.center.split(",");u=+t[0],f=+t[1],h=+t[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:17*i,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:c,maxZoom:l,minLon:g,minLat:d,maxLon:y,maxLat:p,centerZoom:h,centerLon:u,centerLat:f,etag:t.etag}}))},getZxy:function(e,n,r,i,o,s,a){return t(this,null,(function*(){let t=yield r.getArrayBuffer(n,e.rootDirectoryOffset,e.rootDirectoryLength,e);1===e.specVersion&&(t=$(t));const c=_(new DataView(t),i,o,s);if(c){let t=(yield n.getBytes(c.offset,c.length,a)).data;const e=new DataView(t);return 31==e.getUint8(0)&&139==e.getUint8(1)&&(t=O(new Uint8Array(t))),{data:t}}const l=((t,e)=>{if(t.byteLength<17)return null;const n=t.byteLength/17,r=S(t,n-1);if(r.is_dir){const t=r.z,n=e.z-t;return{z:t,x:Math.trunc(e.x/(1<<n)),y:Math.trunc(e.y/(1<<n))}}return null})(new DataView(t),{z:i,x:o,y:s});if(l){const c=((t,e,n,r)=>{const i=R(t,128|e,n,r);return i?{z:e,x:n,y:r,offset:i[0],length:i[1],is_dir:!0}:null})(new DataView(t),l.z,l.x,l.y);if(c){let t=yield r.getArrayBuffer(n,c.offset,c.length,e);1===e.specVersion&&(t=$(t));const l=_(new DataView(t),i,o,s);if(l){let t=(yield n.getBytes(l.offset,l.length,a)).data;const e=new DataView(t);return 31==e.getUint8(0)&&139==e.getUint8(1)&&(t=O(new Uint8Array(t))),{data:t}}}}}))}};function J(t,e){return 4294967296*(e>>>0)+(t>>>0)}function N(t){const e=t.buf;let n,r;return r=e[t.pos++],n=127&r,r<128?n:(r=e[t.pos++],n|=(127&r)<<7,r<128?n:(r=e[t.pos++],n|=(127&r)<<14,r<128?n:(r=e[t.pos++],n|=(127&r)<<21,r<128?n:(r=e[t.pos],n|=(15&r)<<28,function(t,e){const n=e.buf;let r,i;if(i=n[e.pos++],r=(112&i)>>4,i<128)return J(t,r);if(i=n[e.pos++],r|=(127&i)<<3,i<128)return J(t,r);if(i=n[e.pos++],r|=(127&i)<<10,i<128)return J(t,r);if(i=n[e.pos++],r|=(127&i)<<17,i<128)return J(t,r);if(i=n[e.pos++],r|=(127&i)<<24,i<128)return J(t,r);if(i=n[e.pos++],r|=(1&i)<<31,i<128)return J(t,r);throw new Error("Expected varint not more than 10 bytes")}(n,t)))))}function Y(t,e,n,r){if(0==r){1==n&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const r=e[0];e[0]=e[1],e[1]=r}}var F=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function W(e,n){return t(this,null,(function*(){if(1===n||0===n)return e;if(2===n)return O(new Uint8Array(e));throw Error("Compression method not supported")}))}function X(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=r+n>>1,o=e-t[i].tileId;if(o>0)n=i+1;else{if(!(o<0))return t[i];r=i-1}}if(r>=0){if(0===t[r].runLength)return t[r];if(e-t[r].tileId<t[r].runLength)return t[r]}return null}function q(t,e){const n=t.getUint32(e+4,!0),r=t.getUint32(e+0,!0);return n*Math.pow(2,32)+r}function G(t){const e={buf:new Uint8Array(t),pos:0},n=N(e),r=[];let i=0;for(let t=0;t<n;t++){const t=N(e);r.push({tileId:i+t,offset:0,length:0,runLength:1}),i+=t}for(let t=0;t<n;t++)r[t].runLength=N(e);for(let t=0;t<n;t++)r[t].length=N(e);for(let t=0;t<n;t++){const n=N(e);r[t].offset=0===n&&t>0?r[t-1].offset+r[t-1].length:n-1}return r}var Q=class extends Error{};var tt=class{constructor(e,n,r){this.source="string"==typeof e?new class{constructor(t){this.url=t}getKey(){return this.url}getBytes(e,n,r){return t(this,null,(function*(){let t;r||(t=new AbortController,r=t.signal);let i=yield fetch(this.url,{signal:r,headers:{Range:"bytes="+e+"-"+(e+n-1)}});if(416===i.status&&0===e){const t=i.headers.get("Content-Range");if(!t||!t.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const e=+t.substr(8);i=yield fetch(this.url,{signal:r,headers:{Range:"bytes=0-"+(e-1)}})}if(i.status>=300)throw Error("Bad response code: "+i.status);const o=i.headers.get("Content-Length");if(200===i.status&&(!o||+o>n))throw t&&t.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield i.arrayBuffer(),etag:i.headers.get("ETag")||void 0,cacheControl:i.headers.get("Cache-Control")||void 0,expires:i.headers.get("Expires")||void 0}}))}}(e):e,this.decompress=r||W,this.cache=n||new class{constructor(t=100,e=!0,n=W){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=e,this.decompress=n}getHeader(e,n){return t(this,null,(function*(){const r=e.getKey();if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const i=new Promise(((r,i)=>{(function(e,n,r,i){return t(this,null,(function*(){const t=yield e.getBytes(0,16384);if(19792!==new DataView(t.data).getUint16(0,!0))throw new Error("Wrong magic number for PMTiles archive");if(function(t){const e=new DataView(t);return 2===e.getUint16(2,!0)?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):1===e.getUint16(2,!0)?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}(t.data)<3)return[yield K.getHeader(e)];const o=t.data.slice(0,127);let s=t.etag;i&&t.etag!=i&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+e.getKey()),s=void 0);const a=function(t,e){const n=new DataView(t),r=n.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:q(n,8),rootDirectoryLength:q(n,16),jsonMetadataOffset:q(n,24),jsonMetadataLength:q(n,32),leafDirectoryOffset:q(n,40),leafDirectoryLength:q(n,48),tileDataOffset:q(n,56),tileDataLength:q(n,64),numAddressedTiles:q(n,72),numTileEntries:q(n,80),numTileContents:q(n,88),clustered:1===n.getUint8(96),internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:e}}(o,s);if(r){const r=t.data.slice(a.rootDirectoryOffset,a.rootDirectoryOffset+a.rootDirectoryLength),i=e.getKey()+"|"+(a.etag||"")+"|"+a.rootDirectoryOffset+"|"+a.rootDirectoryLength,o=G(yield n(r,a.internalCompression));return[a,[i,o.length,o]]}return[a,void 0]}))})(e,this.decompress,this.prefetch,n).then((t=>{t[1]&&this.cache.set(t[1][0],{lastUsed:this.counter++,data:Promise.resolve(t[1][2])}),r(t[0]),this.prune()})).catch((t=>{i(t)}))}));return this.cache.set(r,{lastUsed:this.counter++,data:i}),i}))}getDirectory(e,n,r,i){return t(this,null,(function*(){const o=e.getKey()+"|"+(i.etag||"")+"|"+n+"|"+r;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const s=new Promise(((o,s)=>{(function(e,n,r,i,o){return t(this,null,(function*(){const t=yield e.getBytes(r,i);if(o.etag&&o.etag!==t.etag)throw new Q(t.etag);const s=G(yield n(t.data,o.internalCompression));if(0===s.length)throw new Error("Empty directory is invalid");return s}))})(e,this.decompress,n,r,i).then((t=>{o(t),this.prune()})).catch((t=>{s(t)}))}));return this.cache.set(o,{lastUsed:this.counter++,data:s}),s}))}getArrayBuffer(e,n,r,i){return t(this,null,(function*(){const t=e.getKey()+"|"+(i.etag||"")+"|"+n+"|"+r;if(this.cache.has(t))return this.cache.get(t).lastUsed=this.counter++,yield this.cache.get(t).data;const o=new Promise(((o,s)=>{e.getBytes(n,r).then((e=>{if(i.etag&&i.etag!==e.etag)throw new Q(e.etag);o(e.data),this.cache.has(t),this.prune()})).catch((t=>{s(t)}))}));return this.cache.set(t,{lastUsed:this.counter++,data:o}),o}))}prune(){if(this.cache.size>=this.maxCacheEntries){let t,e=1/0;this.cache.forEach(((n,r)=>{n.lastUsed<e&&(e=n.lastUsed,t=r)})),t&&this.cache.delete(t)}}invalidate(e,n){return t(this,null,(function*(){this.cache.delete(e.getKey()),yield this.getHeader(e,n)}))}}}getHeader(){return t(this,null,(function*(){return yield this.cache.getHeader(this.source)}))}getZxyAttempt(e,n,r,i){return t(this,null,(function*(){const t=function(t,e,n){if(t>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,t)-1||n>Math.pow(2,t)-1)throw Error("tile x/y outside zoom level bounds");const r=F[t];let i=0,o=0,s=0;const a=[e,n];let c=Math.pow(2,t)/2;for(;c>0;)i=(a[0]&c)>0?1:0,o=(a[1]&c)>0?1:0,s+=c*c*(3*i^o),Y(c,a,i,o),c/=2;return r+s}(e,n,r),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return K.getZxy(o,this.source,this.cache,e,n,r,i);if(e<o.minZoom||e>o.maxZoom)return;let s=o.rootDirectoryOffset,a=o.rootDirectoryLength;for(let e=0;e<=3;e++){const e=X(yield this.cache.getDirectory(this.source,s,a,o),t);if(!e)return;if(e.runLength>0){const t=yield this.source.getBytes(o.tileDataOffset+e.offset,e.length,i);if(o.etag&&o.etag!==t.etag)throw new Q(t.etag);return{data:yield this.decompress(t.data,o.tileCompression),cacheControl:t.cacheControl,expires:t.expires}}s=o.leafDirectoryOffset+e.offset,a=e.length}throw Error("Maximum directory depth exceeded")}))}getZxy(e,n,r,i){return t(this,null,(function*(){try{return yield this.getZxyAttempt(e,n,r,i)}catch(t){if(t instanceof Q)return this.cache.invalidate(this.source,t.message),yield this.getZxyAttempt(e,n,r,i);throw t}}))}getMetadataAttempt(){return t(this,null,(function*(){const t=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==e.etag)throw new Q(e.etag);const n=yield this.decompress(e.data,t.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(n))}))}getMetadata(){return t(this,null,(function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof Q)return this.cache.invalidate(this.source,t.message),yield this.getMetadataAttempt();throw t}}))}};const et=globalThis.fetch,nt={};(async()=>{(()=>{globalThis.fetch=(e,n)=>{const r="string"==typeof e?e:e.url,i=r.match(/^pmtiles:\/\/(https:\/\/.+)/);if(i){const e=new URL(i[1]),{protocol:n,host:r,port:o,pathname:s}=new URL(e);return t(`${n}//${r}${o?":"+o:""}${s}`,null)}if(r.indexOf("pmtiles=true")>-1){const e=new URL(r),{protocol:n,host:i,port:o,pathname:s,searchParams:a}=new URL(e),c=`${n}//${i}${o?":"+o:""}${s}`,l=a.get("z")||"",u=a.get("x")||"",f=a.get("y")||"",h=l&&u&&f?[l,u,f].map((t=>parseInt(t,10))):null;return t(c,h)}return et(e,n)};const t=async(t,e)=>{nt[t]||(nt[t]={instance:new tt(t)});const n=nt[t].instance;if(e){const[t,r,i]=e,o=await n.getZxyAttempt(t,r,i),s=await n.getHeader();return o&&t<=s.maxZoom&&s.minZoom<=t?new Response(o.data,{status:206}):new Response(null,{status:204})}{const e=await n.getMetadataAttempt(),r="pmtiles=true&z={z}&x={x}&y={y}";return e.tiles=[`${t}?${r}`],new Response(JSON.stringify(e),{status:206})}}})(),mapboxgl.accessToken="pk.eyJ1Ijoia2FtYXRhcnlvIiwiYSI6ImNsaTJydDJ1ODA4bGEzam4waHlxMWZiMnYifQ.oikexEXnoSym6eoa_nfEcw";const t=await fetch("./style.json"),e=await t.json();new mapboxgl.Map({container:"map",style:e,minZoom:0,maxZoom:18})})()})();